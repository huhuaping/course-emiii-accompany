{
  "hash": "0430bb595dae17c2e86bbeb1ccdda833",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"my first paper\"\nauthor: \"Kevin Hu\"\nformat: \n  html:\n    toc: true\n---\n\n\n## introduction\n\n## literature\n\n## case analysis\n\n### preparation\n\n\n::: {.cell}\n\n:::\n\n\n\n\n\n### scatter\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: fig-scatter\n#| fig-cap: \"the scatter of educ and lwage\"\n### ==== Wage example: the scatter ====\n\nmroz %>%\n  ggplot(aes(educ, lwage))+\n  geom_point(size=3) +\n  labs(x= \"educ\", y=\"log(wage)\") +\n  theme(text = element_text(size=16))\n```\n````\n\n::: {.cell-output-display}\n![the scatter of educ and lwage](workingpaper_files/figure-html/fig-scatter-1.png){#fig-scatter width=672}\n:::\n:::\n\n\n\n### OLS results\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nform_base <- \"lwage ~ educ + exper + expersq\"\n\nfit_ols <- lm(formula = form_base,data = mroz)\nsummary(fit_ols)\n\n\nmod_origin <- formula(\"lwage ~ educ +exper+expersq\")\nols_origin <- lm(formula = mod_origin, \n                 data = mroz)\n# summary(ols_origin)\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = form_base, data = mroz)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-3.08404 -0.30627  0.04952  0.37498  2.37115 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept) -0.5220406  0.1986321  -2.628  0.00890 ** \neduc         0.1074896  0.0141465   7.598 1.94e-13 ***\nexper        0.0415665  0.0131752   3.155  0.00172 ** \nexpersq     -0.0008112  0.0003932  -2.063  0.03974 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.6664 on 424 degrees of freedom\nMultiple R-squared:  0.1568,\tAdjusted R-squared:  0.1509 \nF-statistic: 26.29 on 3 and 424 DF,  p-value: 1.302e-15\n```\n\n\n:::\n:::\n\n\n````{.cell-code}\n```{{r, results='asis'}}\nlibrary(\"xmerit\") # give you pretty equation\n```\n````\n\n```\nWarning: replacing previous import 'stats::filter' by 'dplyr::filter' when\nloading 'xmerit'\n```\n\n```\nWarning: replacing previous import 'stats::lag' by 'dplyr::lag' when loading\n'xmerit'\n```\n\n````{.cell-code}\n```{{r, results='asis'}}\nlx.out <- xmerit::lx.est(\n  lm.mod = mod_origin, lm.n =2,\n  opt = c(\"s\", \"t\", \"p\"),\n  lm.dt = mroz, inf = c(\"over\",\"fit\",\"Ftest\"))\n```\n````\n\n$$\\begin{equation}\n\\begin{alignedat}{999}\n&\\widehat{lwage}=&&-0.52&&+0.11educ_i\\\\ \n&(s)&&(0.1986)&&(0.0141)\\\\ \n&(t)&&(-2.63)&&(+7.60)\\\\ \n&(p)&&(0.0089)&&(0.0000)\\\\ \n&(cont.)&&+0.04exper_i&&-0.00expersq_i\\\\ \n&(s)&&(0.0132)&&(0.0004)\\\\ \n&(t)&&(+3.15)&&(-2.06)\\\\ \n&(p)&&(0.0017)&&(0.0397)\\\\ \n&(over)&&n=428&&\\hat{\\sigma}=0.6664\\\\ \n&(fit)&&R^2=0.1568&&\\bar{R}^2=0.1509\\\\ \n&(Ftest)&&F^*=26.29&&p=0.0000\n\\end{alignedat}\n\\end{equation}$$\n\n\n\n$$\\begin{equation}\n\\begin{alignedat}{999}\n&\\widehat{lwage}=&&-0.52&&+0.11educ_i\\\\ \n&(s)&&(0.1986)&&(0.0141)\\\\ \n&(t)&&(-2.63)&&(+7.60)\\\\ \n&(p)&&(0.0089)&&(0.0000)\\\\ \n&(cont.)&&+0.04exper_i&&-0.00expersq_i\\\\ \n&(s)&&(0.0132)&&(0.0004)\\\\ \n&(t)&&(+3.15)&&(-2.06)\\\\ \n&(p)&&(0.0017)&&(0.0397)\\\\ \n&(over)&&n=428&&\\hat{\\sigma}=0.6664\\\\ \n&(fit)&&R^2=0.1568&&\\bar{R}^2=0.1509\\\\ \n&(Ftest)&&F^*=26.29&&p=0.0000\n\\end{alignedat}\n\\end{equation}$$\n\n### TSLS\n\n\nWe will use three IVs: motheduc, fatheduc, huseudc\n\nthe stage 1 model:\n\n$$\neduc = \\gamma_0 +\\gamma_1 exper + \\gamma_1 expersqr +\\theta_1 motheduc + \\theta_2 fatheduc + \\theta_3 huseduc + v_i\n$$\n\n### Weak IV test (Restricted F-test)\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#OLS estimation firstly\n\nmodel_hus <- formula(educ~ exper +expersq + motheduc + fatheduc+ huseduc)\n\nlm.hus <- lm(formula = model_hus, data = mroz)\n\nsummary(lm.hus)\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = model_hus, data = mroz)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-6.6882 -1.1519  0.0097  1.0640  5.7302 \n\nCoefficients:\n              Estimate Std. Error t value Pr(>|t|)    \n(Intercept)  5.5383110  0.4597824  12.046  < 2e-16 ***\nexper        0.0374977  0.0343102   1.093 0.275059    \nexpersq     -0.0006002  0.0010261  -0.585 0.558899    \nmotheduc     0.1141532  0.0307835   3.708 0.000237 ***\nfatheduc     0.1060801  0.0295153   3.594 0.000364 ***\nhuseduc      0.3752548  0.0296347  12.663  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 1.738 on 422 degrees of freedom\nMultiple R-squared:  0.4286,\tAdjusted R-squared:  0.4218 \nF-statistic:  63.3 on 5 and 422 DF,  p-value: < 2.2e-16\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nlibrary(\"car\")\n```\n````\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'car' was built under R version 4.3.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: carData\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'carData' was built under R version 4.3.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'car'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:dplyr':\n\n    recode\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:purrr':\n\n    some\n```\n\n\n:::\n\n````{.cell-code}\n```{{r}}\n# restricted F-test\n(constrain_test1 <- linearHypothesis(\n  model = lm.hus, c(\"motheduc=0\", \"fatheduc=0\", \"huseduc=0\")\n  ))\n# obtain F statistics\nF_r1 <- constrain_test1$F[[2]]\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLinear hypothesis test\n\nHypothesis:\nmotheduc = 0\nfatheduc = 0\nhuseduc = 0\n\nModel 1: restricted model\nModel 2: educ ~ exper + expersq + motheduc + fatheduc + huseduc\n\n  Res.Df    RSS Df Sum of Sq      F    Pr(>F)    \n1    425 2219.2                                  \n2    422 1274.4  3    944.85 104.29 < 2.2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n\n\n:::\n:::\n\n\n\n### Cragg-F test\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n# filter samples\nmroz1 <- wooldridge::mroz %>%\n  filter(wage>0, inlf==1)\n# set parameters\nN <- nrow(mroz1)\nG <- 2 \nB <- 2\nL <- 2 \n# for endogenous variables\nx1 <- resid(lm( mtr ~ kidslt6 + nwifeinc, data = mroz1))\nx2 <- resid(lm( educ ~ kidslt6 + nwifeinc, data = mroz1))\n# for instruments\nz1 <-resid(lm(motheduc ~ kidslt6 + nwifeinc, data = mroz1))\nz2 <-resid(lm(fatheduc ~ kidslt6 + nwifeinc, data=mroz1))\n# column bind\nX <- cbind(x1,x2)\nY <- cbind(z1,z2)\n# calculate Canonical correlation\nrB <- min(cancor(X,Y)$cor)\n# obtain the F statistics\nCraggDonaldF <- ((N-G-L)/L)/((1-rB^2)/rB^2)\n```\n````\n:::\n\n\n\n\n### IV exogeneity test(over-identifiction test)\n\n\n## conclusion\n",
    "supporting": [
      "workingpaper_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}